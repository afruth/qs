<!-- Favorite questions -->

<template name="favorites">
    <h2>Favorite Q's</h2>
    {{>questionDefault question}}
</template>

<template name="mylist">
    <h2>Your Q's</h2>
    {{>questionDefault question}}
</template>

<template name="profile">
    <h2>{{user.profile.name}} Q's</h2>
    {{>questionDefault question}}
</template>

<template name="question">
    {{>questionDefault question}}
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="fb-comments" data-href="{{href}}" data-numposts="10" data-colorscheme="light" data-width="100%"></div>
        </div>
    </div>
</template>

<template name="questionDefault">
    {{#if this.count}}
        {{#unless loggingIn}}
            {{#each this}}
                {{#if isAvailable this}}
                    {{>qtemplate}}
                {{else}}
                    {{>qtemplateown}}
                {{/if}}
            {{/each}}
        {{/unless}}
        {{>loadMore}}
    {{else}}
        {{>notFound}}
    {{/if}}
</template>









<template name="qlist">
    <h2>Latest Q's</h2>
    {{#with newQuestion}} {{>newQ newQuestion}} {{/with}} {{>questionDefault question}}

</template>

<template name="newQ">

    {{#if count}}
    <div class="btn-group btn-group-justified mt10">
        <a class="loadMore btn btn-primary" href="#">{{count}} new Q's.</a>
    </div>
    {{/if}}

</template>

<template name='qtemplate'>
     <div class="panel panel-default">
        <div class="panel-heading">
            <a href="/profile/{{username._id}}/{{username.slug}}">
                    <img src="{{username.profile.avatar}}" />
                </a><a href="/q/{{_id}}/{{slug this}}">{{username.profile.name}} asked:</a>
            {{>actionButtons}}
        </div>
        <div class="panel-body">
            <p>{{text}}</p>
            <div class="answers">
            <p>{{#each answers}}
                <button class="btn btn-primary answerButton" id="{{this.answer}}" data-qid="{{../_id}}">{{this.answer}}</button>
                {{/each}}</p>
        </div>
                {{>shareButtons}}
        </div>
    </div>

</template>


<template name='qtemplateown'>
    <div class="panel panel-default">
        <div class="panel-heading">
            <a href="/profile/{{username._id}}/{{username.slug}}">
                    <img src="{{username.profile.avatar}}" />
                </a><a href="/q/{{_id}}/{{slug this}}"><br>{{username.profile.name}}</a>
            {{>actionButtons}}
        </div>
        <div class="panel-body">
            <div class="col-md-6">
            <div class="user clearfix">

                <div class="coins">
                    {{coins}}
                </div>
                <div class="center">coins</div>
            </div>
            <div class="question">

                <p>{{text}}</p>
            </div>
            <!--
            <div class="answerLength">
                <p>{{#if totalAnswers}}{{totalAnswers}}{{else}}0{{/if}} Answers</p>
            </div>-->
        </div>
        <div class="col-md-6">
            <div class="pad10 mt10">
                {{>highchart this}}
                <!--{{#each preppedAnswers this}}
                    {{> prepAnswer}}
                {{/each}}-->
            </div>
        </div>
         {{>shareButtons}}
        </div>
    </div>
</template>

<template name="prepAnswer">
    <b>{{text}}</b>
    <br>
    <div class="count">
        <div class="count-inside bg-primary" style="width:{{width}}%;background-color:rgb(0,{{width}},{{width}})">{{count}}</div>
    </div>
    <br>
</template>

<template name="actionButtons">
    {{#if currentUser}}
    <div class="actionButtons pull-right">
        <div class="btn-group">
            {{#if flipped}}
                <button class="flip{{#if flipped}}-on{{else}}-off{{/if}} btn btn-{{#if flipped}}warning{{else}}default{{/if}} btn-xs" data-toggle="tooltip" title="Flip this" data-qid="{{_id}}">
                    <span class="glyphicon glyphicon-random"></span>
                </button>
            {{/if}}
            <button class="bomb btn btn-danger btn-xs" data-toggle="tooltip" {{isBombed}} {{isPraised}} title="Report this Q" data-qid="{{_id}}">
                {{bombs.length}} <span class="glyphicon glyphicon-ban-circle"></span>
            </button>
            <button class="praise btn btn-success btn-xs" data-toggle="tooltip" {{isPraised}} {{isBombed}} title="Praise this Q" data-qid="{{_id}}">
                {{praises.length}} <span class="glyphicon glyphicon-thumbs-up"></span>
            </button>
            <button class="star btn btn-{{#if notInFav}}default{{else}}primary{{/if}} btn-xs" data-toggle="tooltip" title="Favorite this Q" data-qid="{{_id}}">
                <span class="glyphicon glyphicon-star{{#if notInFav}}-empty{{/if}}"></span>
            </button>
            {{#if isOwner}} {{#unless isIncreasing}}
            <button class="increase btn btn-warning btn-xs" data-toggle="tooltip" {{hasCoins}} title="Increase coins" data-qid="{{_id}}">
                <span class="glyphicon glyphicon-plus"></span>
            </button>
            {{else}}

            <button class="addCoins btn btn-warning btn-xs" type="button" data-qid="{{_id}}">Add! (max {{coins}} coins)</button>
            <input type="number" class="input-xs" id="increaseCoins" />
            {{/unless}} {{/if}}
        </div>
    </div>
    {{/if}}
</template>

<template name="loadMore">
    {{#if hasMore count}} {{else}}
    <div class="btn-group btn-group-justified mt10">
        <a href="#" id="loadMore" class="center-block btn btn-primary">Load more</a>
    </div>
    {{/if}}
</template>

<template name="shareButtons">
    <div class="shareButtons">
        <div class="fb-like" data-href="{{config.href}}" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>
        <div class="comment-count"><iframe src="http://www.facebook.com/plugins/comments.php?href={{config.href}}&permalink=1" scrolling="no" frameborder="0"
                style="border:none; overflow:hidden; width:130px; height:16px;" allowTransparency="true"></iframe></div>
    </div>
</template>


<template name="notFound">
    <h4>Nope. No Q's here</h4>
</template>

<template name="search">
    <h2>You searched for: {{searchQuery}} {{#if currentUser}}<button id='saveSearch' {{isSaved}} class="btn btn-xs btn-primary">{{#if isSaved}}Already saved{{else}}Save search{{/if}}</button>{{/if}}</h2>
    {{>questionDefault question}}
</template>


<template name="highchart">
    <div class="highchart" id="{{_id}}"></div>
</template>
